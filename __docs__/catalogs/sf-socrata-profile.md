# SF Socrata Profile (auto)

Total datasets: 4
By category:
- Economy and Community: 1
- Housing and Buildings: 1
- Culture and Recreation: 1
- Geographic Locations and Boundaries: 1


# SF Socrata Profile (Pilot)

Goals
- Inventory DataSF catalog and shortlist 5â€“7 pilot datasets.
- Summarize API shapes: common columns/types, paging, auth needs.

Checklist
- Run: `SOCRATA_APP_ID=... npm run registry:socrata:sf`
- Inspect: `municipalities/CA/SF/directory.json`
- Capture: dataset count, categories, typical fields (address, dates, ids), limits.
- Shortlist: candidate datasets for `sf.housing.permits` branch and adjacent signals.
- Notes: required tokens, rate limits, anomalies.

## Registry Schema

The SF Socrata registry builder outputs a directory.json file with the following frozen schema:

### SocrataDatasetRecord Structure
```javascript
{
  id: string,           // Dataset unique identifier (e.g., "abcd-1234")
  name: string,         // Human readable dataset name
  type: string,         // Dataset type (e.g., "dataset", "chart", "view")
  domain: string,       // Socrata domain hosting this dataset
  permalink: string,    // Direct link to dataset on Socrata portal
  createdAt: string,    // ISO timestamp when dataset was created
  updatedAt: string,    // ISO timestamp of last dataset modification
  tags: string[],       // Array of dataset tags
  categories: string[], // Array of domain categories
  owner: string,        // Dataset owner/author
  license: string|null  // Dataset license information
}
```

### Output Format
- Array of `SocrataDatasetRecord` objects
- Sorted alphabetically by name for stable diffs
- Generated by `scripts/build-datasf-index.mjs`
- Default output: `municipalities/CA/SF/directory.json`

### Data Source
- Socrata Discovery API: `https://api.us.socrata.com/api/catalog/v1`
- Filtered by domain: `data.sfgov.org`
- Paginated with configurable page size (default: 1000)
- Rate limit enhanced with `X-App-Token` header when available
